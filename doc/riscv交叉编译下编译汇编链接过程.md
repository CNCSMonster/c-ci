### 编译

riscv64-linux-gnu-gcc -c source.c -o output.o

### 汇编与链接

如果你有一个已经编译成汇编语言的源代码文件 `gg`，并且该文件依赖于静态库文件 `t.a`，你可以通过以下步骤来生成可执行程序：

1. 将汇编语言文件 `gg` 转换为目标文件（Object File）。可以使用汇编器（如 GNU Assembler，简称 `as`）来完成此操作。运行以下命令：

   ```shell
   as -o gg.o gg
   复制代码
   ```

   这将把 `gg` 转换为目标文件 `gg.o`。

2. 使用静态库文件 `t.a` 和目标文件 `gg.o` 进行链接。可以使用链接器（如 GNU ld）来完成此操作。运行以下命令：

   ```shell
   ld -o my_program gg.o t.a
   复制代码
   ```

   这将把目标文件 `gg.o` 和静态库文件 `t.a` 链接到一起，生成可执行程序 `my_program`。

   链接器会解析汇编文件中的符号引用，并将其与静态库文件中的定义进行匹配。

3. 执行生成的可执行程序：

   ```shell
   ./my_program
   复制代码
   ```

   运行 `./my_program` 命令来执行生成的可执行程序。

请注意，上述命令中的文件名和路径是示例，请根据实际情况进行替换。还要确保你的系统上已安装了相关的汇编器和链接器。

希望这个示例对你有帮助。如有任何进一步的问题，请随时提问。

### 注意预处理

编译某个文件成为汇编代码，如果该文件中使用了本文件中没有定义的函数。

如果外部有定义的话，则时候可以直接

`as -o t.o t.s`

`gcc -o texe t.o out.o` 编译出结果

但是如果使用的内部没有定义的函数为宏函数的话，则翻译出来的汇编中没有用来链接外部函数中函数定义的名，就会链接失败

比如使用的库函数的定义为`#define starttime() _sysy_starttime(__LINE__)` 的时候

我们的代码里面使用了starttime()就不能够直接翻译成.s，否则最后会链接失败。

处理方法:

先包含头文件,对代码进行预处理之后再进行编译是不行的，这样子会导入很多typedef，struct这样我们的编译器前端不需要分析的东西